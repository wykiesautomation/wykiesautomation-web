
const CONFIG = {
  PAYFAST_MERCHANT_ID: '32913011',
  PAYFAST_MERCHANT_KEY: '8wd7iwcgippud',
  PAYFAST_PASSPHRASE: 'Ford@20132016',
  ITN_NOTIFY_URL: 'https://example.com/payfast-itn',
  CONTACT_ENDPOINT: 'https://script.google.com/macros/s/REPLACE/exec',
  ADMIN_PASSPHRASE: 'Ford@20132016'
};
const PRODUCTS = [{'sku': 'WA-01', 'name': '3D Printer Control V1', 'price': 'R1,499', 'image': 'img_wa01.jpg', 'desc': 'Modern 3D printer controller UI with ESP32 integration and trial desktop GUI (.exe).'}, {'sku': 'WA-02', 'name': 'Plasma Cutter Control V1', 'price': 'R2,499', 'image': 'img_wa02.jpg', 'desc': 'Plasma cutter GUI with DXF/SVG import, kerf compensation, and sensor feedback.'}, {'sku': 'WA-03', 'name': 'ECU/TCU Control System V1', 'price': 'R6,499', 'image': 'img_wa03.jpg', 'desc': 'Van Wyk ECU/TCU system with modern dashboard, profiles, and logging.'}, {'sku': 'WA-04', 'name': 'Fridge/Freezer Control V1', 'price': 'R899', 'image': 'img_wa04.jpg', 'desc': 'Smart temperature control and monitoring unit.'}, {'sku': 'WA-05', 'name': 'Nano GSM Gate Controller V1', 'price': 'R800', 'image': 'img_wa05.jpg', 'desc': 'Arduino Nano GSM-based gate opener with SMS command set.'}, {'sku': 'WA-06', 'name': 'Solar Energy Management System V1', 'price': 'R3,999', 'image': 'img_wa06.jpg', 'desc': 'Solar EMS with battery and inverter monitoring, alerts and dashboards.'}, {'sku': 'WA-07', 'name': 'Hybrid Gate Controller V1', 'price': 'R1,800', 'image': 'img_wa07.jpg', 'desc': 'Hybrid Wi‑Fi/GSM gate controller with automatic channel fallback.'}, {'sku': 'WA-08', 'name': 'Smart Battery Charger V1', 'price': 'R999', 'image': 'img_wa08.jpg', 'desc': 'Smart charger with multi‑stage profiles and logging.'}, {'sku': 'WA-09', 'name': 'Gate/Garage Controller V1', 'price': 'R1,009', 'image': 'img_wa09.jpg', 'desc': 'Wi‑Fi/Bluetooth gate/garage opener unit for home automation.'}, {'sku': 'WA-10', 'name': '12CH Hybrid Alarm V1', 'price': 'R1,299', 'image': 'img_wa10.jpg', 'desc': '12‑channel hybrid alarm (Wi‑Fi primary, GSM fallback).'}, {'sku': 'WA-11', 'name': '16CH Hybrid Alarm V1', 'price': 'R5,499', 'image': 'img_wa11.jpg', 'desc': '16‑channel hybrid alarm with advanced profiles and sensor health.'}, {'sku': 'WA-12', 'name': 'TCU Gearbox Controller V1', 'price': 'R4,500', 'image': 'img_wa12.jpg', 'desc': 'Standalone TCU gearbox controller with reverse lockout and configurable gears.'}];
function qs(name){const params=new URLSearchParams(window.location.search);return params.get(name);}
function buy(sku,price){alert('Redirecting to PayFast for '+sku+' ('+price+') — demo stub.');}
function renderProduct(){const sku=qs('sku');const p=PRODUCTS.find(x=>x.sku===sku)||PRODUCTS[0];const el=document.getElementById('product');el.innerHTML=`<div class="card"><img src="assets/img/${p.image}" alt="${p.name}"><div class="content"><h2>${p.name}</h2><div class="price">${p.price}</div><p>${p.desc}</p><div style="display:flex;gap:8px;margin-top:10px"><a class="btn" href="#" onclick="buy('${p.sku}','${p.price}')">Buy via PayFast</a><a class="btn secondary" href="#">Download Free Trial (.exe)</a></div></div></div>`;}
function renderGallery(){const g=document.getElementById('gallery');g.innerHTML=PRODUCTS.map(p=>`<div class="card"><img src="assets/img/${p.image}" alt="${p.name}"><div class="content"><h3>${p.name}</h3><div class="small">${p.sku}</div></div></div>`).join('');}
function initContact(){const sel=document.getElementById('productSelect');sel.innerHTML=PRODUCTS.map(p=>`<option>${p.sku} — ${p.name}</option>`).join('');const form=document.getElementById('contactForm');form.addEventListener('submit',async(e)=>{e.preventDefault();const data=Object.fromEntries(new FormData(form).entries());try{const r=await fetch(CONFIG.CONTACT_ENDPOINT,{method:'POST',body:new URLSearchParams(data)});document.getElementById('notice').style.display='block';document.getElementById('notice').textContent='Thanks! We'll reply by email.';form.reset();}catch(err){alert('Submit failed. Please email wykiesautomation@gmail.com');}});}
function adminLogin(){const pass=document.getElementById('pass').value;if(pass===CONFIG.ADMIN_PASSPHRASE){document.getElementById('login').style.display='none';document.getElementById('panel').style.display='block';adminInit();}else{alert('Incorrect passphrase');}}
function adminInit(){const ap=document.getElementById('adminProducts');ap.innerHTML=PRODUCTS.map(p=>`<div class="card"><img src="assets/img/${p.image}" alt="${p.name}"><div class="content"><h3>${p.name}</h3><label class="small">Price</label><input class="input" value="${p.price}"><label class="small">Image URL</label><input class="input" value="assets/img/${p.image}"><button class="btn secondary">Save (stub)</button></div></div>`).join('');const ag=document.getElementById('adminGallery');ag.innerHTML=ap.innerHTML;}
