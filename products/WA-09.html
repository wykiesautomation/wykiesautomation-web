<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>WA-09 — Wykies Automation</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body{margin:0;font-family:Inter,ui-sans-serif,system-ui;background:#0A1630;color:#EAF1FF}
    .wrap{max-width:980px;margin:0 auto;padding:22px}
    a{color:#cfe0ff;text-decoration:none}
    .hero{display:grid;grid-template-columns:1fr 1fr;gap:18px}
    .img{height:260px;border-radius:12px;border:1px solid rgba(255,255,255,.12);background:linear-gradient(135deg, rgba(47,118,255,.25), rgba(18,35,89,.55)),var(--img) center/cover no-repeat}
    .card{background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02));border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:16px}
    .btn{display:inline-block;margin-right:8px;margin-top:8px;padding:10px 14px;border-radius:10px;font-weight:700}
    .primary{background:linear-gradient(135deg,#2F76FF,#4f8dff);color:#fff}
    .ghost{border:1px solid rgba(255,255,255,.2);color:#EAF1FF}
    .muted{color:#99A7C2}
  </style>
</head>
<body>
  <div class="wrap">
    <p><a href="/">← Home</a></p>
    <div class="hero">
      <div class="img" style="--img: url('/assets/images/wa-09.webp');"></div>
      <div class="card">
        <h1 id="title">WA-09</h1>
        <p id="summary" class="muted">Loading…</p>
        <div>
          <a class="btn primary" id="trial" href="#" target="_blank" rel="noopener">Download Trial</a>
          <a class="btn ghost" id="docs" href="#" target="_blank" rel="noopener">View Documents</a>
        </div>
      </div>
    </div>
    <div class="card" style="margin-top:18px">
      <h2>Details</h2>
      <div id="desc" class="muted">Awaiting data…</div>
    </div>
  </div>
  <script>
    async function load(){
      try{
        const cfg = await (await fetch('/config.json', {cache:'no-store'})).json();
        const api = cfg.cms?.appsScriptUrl; const sheetId = cfg.cms?.sheetId; const sku = 'WA-09';
        const ai = await (await fetch('/assets/data/products_ai.json')).json();
        const map = new Map(ai.products.map(p=>[p.sku,p]));
        let rec = map.get(sku) || { sku: sku, name: sku };
        if(api){
          try{
            const r = await fetch(api + '?action=products&sheetId=' + encodeURIComponent(sheetId));
            const data = await r.json();
            const found = (data.products||[]).find(p=>p.sku===sku);
            if(found) rec = Object.assign({}, rec, found);
          }catch(e){ console.warn('Sheet fetch failed', e); }
        }
        document.getElementById('title').textContent = sku + ' — ' + (rec.name||'');
        document.getElementById('summary').textContent = rec.summary || '';
        document.getElementById('desc').textContent = rec.description || '';
        const imgEl = document.querySelector('.img');
        const url = rec.imageUrl || '/assets/images/wa-09.webp';
        imgEl.style.setProperty('--img', `url('${url}')`);
        if(rec.trialUrl) document.getElementById('trial').href = rec.trialUrl; else document.getElementById('trial').style.display='none';
        if(rec.docUrl) document.getElementById('docs').href = rec.docUrl; else document.getElementById('docs').style.display='none';
      }catch(e){ console.warn(e); }
    }
    load();
  </script>
</body>
</html>
